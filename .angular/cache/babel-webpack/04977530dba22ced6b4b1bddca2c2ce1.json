{"ast":null,"code":"import * as CartActions from 'src/app/cart.actions';\nimport { DOCUMENT } from '@angular/common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@auth0/angular-jwt\";\nimport * as i4 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i5 from \"../shared/home.serice\";\nimport * as i6 from \"@agm/core\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"../timetable/timetable-forms/timetable-forms.component\";\nconst _c0 = [\"content\"];\nconst _c1 = [\"timeTable\"];\n\nfunction HomeComponent_ng_template_1_table_19_th_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \" Reserv \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_ng_template_1_table_19_tr_11_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2, \"For valuation\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_ng_template_1_table_19_tr_11_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const service_r11 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(service_r11.price);\n  }\n}\n\nconst _c2 = function (a0) {\n  return [a0];\n};\n\nfunction HomeComponent_ng_template_1_table_19_tr_11_input_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"input\", 21);\n    i0.ɵɵlistener(\"change\", function HomeComponent_ng_template_1_table_19_tr_11_input_10_Template_input_change_0_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const service_r11 = i0.ɵɵnextContext().$implicit;\n      const ctx_r17 = i0.ɵɵnextContext(3);\n      return ctx_r17.addToCart($event, service_r11.id, service_r11.duration);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r12 = i0.ɵɵnextContext().index;\n    i0.ɵɵpropertyInterpolate(\"name\", i0.ɵɵpureFunction1(2, _c2, i_r12));\n    i0.ɵɵpropertyInterpolate(\"id\", i0.ɵɵpureFunction1(4, _c2, i_r12));\n  }\n}\n\nfunction HomeComponent_ng_template_1_table_19_tr_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵelementStart(5, \"span\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, HomeComponent_ng_template_1_table_19_tr_11_td_7_Template, 3, 0, \"td\", 18);\n    i0.ɵɵtemplate(8, HomeComponent_ng_template_1_table_19_tr_11_td_8_Template, 3, 1, \"td\", 18);\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtemplate(10, HomeComponent_ng_template_1_table_19_tr_11_input_10_Template, 1, 6, \"input\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const service_r11 = ctx.$implicit;\n    const u_r8 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(service_r11.serviceName);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(service_r11.duration);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", service_r11.isPriced == false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", service_r11.isPriced == true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !u_r8.isProvider);\n  }\n}\n\nfunction HomeComponent_ng_template_1_table_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 17);\n    i0.ɵɵelementStart(1, \"thead\");\n    i0.ɵɵelementStart(2, \"tr\");\n    i0.ɵɵelementStart(3, \"th\");\n    i0.ɵɵtext(4, \" Service Name \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \" Duration[h] \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \" Cost \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, HomeComponent_ng_template_1_table_19_th_9_Template, 2, 0, \"th\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"tbody\");\n    i0.ɵɵtemplate(11, HomeComponent_ng_template_1_table_19_tr_11_Template, 11, 5, \"tr\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const u_r8 = ctx.ngIf;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngIf\", !u_r8.isProvider);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r6.getProviderServices);\n  }\n}\n\nfunction HomeComponent_ng_template_1_div_21_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"button\", 24);\n    i0.ɵɵlistener(\"click\", function HomeComponent_ng_template_1_div_21_button_1_Template_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext(3);\n      return ctx_r24.openTimeTable($event);\n    });\n    i0.ɵɵtext(1, \"Save\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction HomeComponent_ng_template_1_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, HomeComponent_ng_template_1_div_21_button_1_Template, 2, 0, \"button\", 23);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const u_r22 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !u_r22.isProvider);\n  }\n}\n\nfunction HomeComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 4);\n    i0.ɵɵelementStart(1, \"div\", 5);\n    i0.ɵɵelementStart(2, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function HomeComponent_ng_template_1_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const d_r5 = restoredCtx.dismiss;\n      return d_r5(\"Cross click\");\n    });\n    i0.ɵɵelementStart(3, \"span\", 7);\n    i0.ɵɵtext(4, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function HomeComponent_ng_template_1_Template_button_click_5_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r28 = i0.ɵɵnextContext();\n      return ctx_r28.closeModal1($event);\n    });\n    i0.ɵɵelementStart(6, \"span\", 7);\n    i0.ɵɵtext(7, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 9);\n    i0.ɵɵelement(9, \"img\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 11);\n    i0.ɵɵelementStart(11, \"h4\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"h6\");\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"h6\", 12);\n    i0.ɵɵtext(16, \"Choose services from list\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 13);\n    i0.ɵɵelementStart(18, \"div\", 14);\n    i0.ɵɵtemplate(19, HomeComponent_ng_template_1_table_19_Template, 12, 2, \"table\", 15);\n    i0.ɵɵpipe(20, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(21, HomeComponent_ng_template_1_div_21_Template, 2, 1, \"div\", 16);\n    i0.ɵɵpipe(22, \"async\");\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"hidden\", true);\n    i0.ɵɵadvance(7);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r1.getProviderServices[0] == null ? null : ctx_r1.getProviderServices[0].providerLogo, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.getProviderServices[0] == null ? null : ctx_r1.getProviderServices[0].providerName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.getProviderServices[0] == null ? null : ctx_r1.getProviderServices[0].providerDescription);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(20, 6, ctx_r1.user$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(22, 8, ctx_r1.user$));\n  }\n}\n\nfunction HomeComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r32 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵelementStart(1, \"h4\", 26);\n    i0.ɵɵtext(2, \"Hi there!\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function HomeComponent_ng_template_3_Template_button_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r32);\n      const d_r30 = restoredCtx.dismiss;\n      return d_r30(\"Cross click\");\n    });\n    i0.ɵɵelementStart(4, \"span\", 7);\n    i0.ɵɵtext(5, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function HomeComponent_ng_template_3_Template_button_click_6_listener($event) {\n      i0.ɵɵrestoreView(_r32);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return ctx_r33.closeModal2($event);\n    });\n    i0.ɵɵelementStart(7, \"span\", 7);\n    i0.ɵɵtext(8, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 13);\n    i0.ɵɵelementStart(10, \"div\", 14);\n    i0.ɵɵelement(11, \"app-timetable-forms\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(12, \"div\", 22);\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"hidden\", true);\n  }\n}\n\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(document, store, Userstore, router, jwtHelper, config, modalService, service) {\n      this.store = store;\n      this.Userstore = Userstore;\n      this.router = router;\n      this.jwtHelper = jwtHelper;\n      this.modalService = modalService;\n      this.service = service;\n      this.latitude = 50.6633220000000000;\n      this.longitude = 15.5549607000000000;\n      config.backdrop = 'static';\n      config.keyboard = false;\n      this.cart$ = this.store.select('cart');\n      this.user$ = this.Userstore.select('user');\n    }\n\n    onMapReady(e) {\n      this.map = e;\n    }\n\n    isUserAuthenticated() {\n      const token = localStorage.getItem(\"jwt\");\n\n      if (token) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    logOut() {\n      localStorage.removeItem(\"jwt\");\n    }\n\n    ngOnInit() {\n      this.service.getProviders().subscribe(res => {\n        this.getProvidersView = res.data;\n        console.log(res.message);\n        var isProvider;\n        this.user$.subscribe(u => isProvider = u.isProvider);\n\n        if (isProvider == true) {\n          var providerId;\n          this.user$.subscribe(u => providerId = u.providerID);\n          this.getProvidersView = this.getProvidersView.filter(t => t.id == providerId);\n        }\n\n        this.getProvidersView.forEach(provider => {\n          var marker = new google.maps.Marker({\n            position: new google.maps.LatLng(provider.lat, provider.lng),\n            map: this.map,\n            title: provider.name\n          });\n          marker.addListener(\"click\", () => {\n            this.service.getProviderServices(provider.id).subscribe(res => {\n              this.getProviderServices = res.data;\n              this.store.dispatch(new CartActions.setProvider(provider.id));\n              console.log(res.Messaage);\n            });\n            this.modalService.open(this.content, {\n              size: 'lg',\n              backdrop: 'static'\n            });\n            console.log('Marker klikniety');\n            console.log(provider.name);\n          });\n        });\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    openTimeTable(e) {\n      console.log('otwieram termianrz!!!:');\n      this.modalService.open(this.timeTable, {\n        size: 'lg',\n        backdrop: 'static'\n      });\n    }\n\n    closeModal1(e) {\n      this.foo2();\n      document.getElementById('closeModalButton1').click();\n    }\n\n    closeModal2(e) {\n      this.foo2();\n      document.getElementById('closeModalButton1').click();\n      document.getElementById('closeModalButton2').click(); //todo backup\n    }\n\n    foo2() {\n      console.log('Zamykam modal');\n      this.store.dispatch(new CartActions.resetCart());\n    }\n\n    addToCart(e, itemId, duration) {\n      const cartItem = {\n        cartItem: itemId,\n        duration: duration\n      };\n      if (e.target.checked) this.store.dispatch(new CartActions.addToCart(cartItem));else this.store.dispatch(new CartActions.delFromCart(cartItem));\n    }\n\n  }\n\n  HomeComponent.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(DOCUMENT), i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.JwtHelperService), i0.ɵɵdirectiveInject(i4.NgbModalConfig), i0.ɵɵdirectiveInject(i4.NgbModal), i0.ɵɵdirectiveInject(i5.HomeService));\n  };\n\n  HomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    viewQuery: function HomeComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.content = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.timeTable = _t.first);\n      }\n    },\n    decls: 5,\n    vars: 2,\n    consts: [[3, \"latitude\", \"longitude\", \"mapReady\"], [\"class\", \"col-md-12\"], [\"content\", \"\"], [\"timeTable\", \"\"], [1, \"col-md-24\"], [1, \"float-end\"], [\"id\", \"closeModalButton1\", \"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", 3, \"hidden\", \"click\"], [\"aria-hidden\", \"true\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", \"float-right\", 3, \"click\"], [1, \"text-center\", 2, \"height\", \"150px\"], [\"alt\", \"Responsive image\", 1, \"img-fluid\", \"mh-100\", 3, \"src\"], [1, \"text-center\"], [\"id\", \"modal-basic-title\", 1, \"modal-title\", \"ml-5\", \"text-center\"], [1, \"modal-body\"], [1, \"container\"], [\"class\", \"table table-striped table-responsive-lg btn-table\", 4, \"ngIf\"], [\"class\", \"modal-footer\", 4, \"ngIf\"], [1, \"table\", \"table-striped\", \"table-responsive-lg\", \"btn-table\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"checkbox\", 3, \"name\", \"id\", \"change\", 4, \"ngIf\"], [\"type\", \"checkbox\", 3, \"name\", \"id\", \"change\"], [1, \"modal-footer\"], [\"type\", \"button\", \"class\", \"btn btn-outline-dark\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-dark\", 3, \"click\"], [1, \"modal-header\"], [\"id\", \"modal-basic-title\", 1, \"modal-title\"], [\"id\", \"closeModalButton2\", \"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", 3, \"hidden\", \"click\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", 3, \"click\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"agm-map\", 0);\n        i0.ɵɵlistener(\"mapReady\", function HomeComponent_Template_agm_map_mapReady_0_listener($event) {\n          return ctx.onMapReady($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(1, HomeComponent_ng_template_1_Template, 23, 10, \"ng-template\", 1, 2, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(3, HomeComponent_ng_template_3_Template, 13, 1, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"latitude\", ctx.latitude)(\"longitude\", ctx.longitude);\n      }\n    },\n    directives: [i6.AgmMap, i7.NgIf, i7.NgForOf, i8.TimetableFormsComponent],\n    pipes: [i7.AsyncPipe],\n    styles: [\"agm-map[_ngcontent-%COMP%]{height:800px}.counter[_ngcontent-%COMP%]{width:15%;display:flex;justify-content:space-between;align-items:center}.cartBtn[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#d9d9d9;display:flex;justify-content:center;align-items:center;font-size:20px;font-family:\\\\2018Open Sans\\\\2019;font-weight:900;color:#202020;cursor:pointer}.count[_ngcontent-%COMP%]{font-size:20px;font-family:\\\\2018Open Sans\\\\2019;font-weight:900;color:#202020}.myCustomModalClass[_ngcontent-%COMP%]   .modal-dialog[_ngcontent-%COMP%]{max-width:565px}\"]\n  });\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}